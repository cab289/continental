(function(){"use strict";var pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ye(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ze={},Qe={get exports(){return ze},set exports(t){ze=t}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(t,e){(function(l,y){t.exports=y()})(pe,function(){function l(s){var m=typeof s;return s!==null&&(m==="object"||m==="function")}function y(s){return typeof s=="function"}var r=void 0;Array.isArray?r=Array.isArray:r=function(s){return Object.prototype.toString.call(s)==="[object Array]"};var u=r,i=0,h=void 0,g=void 0,f=function(m,w){p[i]=m,p[i+1]=w,i+=2,i===2&&(g?g(P):z())};function E(s){g=s}function v(s){f=s}var n=typeof window<"u"?window:void 0,C=n||{},B=C.MutationObserver||C.WebKitMutationObserver,V=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",X=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function oe(){return function(){return process.nextTick(P)}}function ce(){return typeof h<"u"?function(){h(P)}:d()}function o(){var s=0,m=new B(P),w=document.createTextNode("");return m.observe(w,{characterData:!0}),function(){w.data=s=++s%2}}function c(){var s=new MessageChannel;return s.port1.onmessage=P,function(){return s.port2.postMessage(0)}}function d(){var s=setTimeout;return function(){return s(P,1)}}var p=new Array(1e3);function P(){for(var s=0;s<i;s+=2){var m=p[s],w=p[s+1];m(w),p[s]=void 0,p[s+1]=void 0}i=0}function j(){try{var s=Function("return this")().require("vertx");return h=s.runOnLoop||s.runOnContext,ce()}catch{return d()}}var z=void 0;V?z=oe():B?z=o():X?z=c():n===void 0&&typeof Ye=="function"?z=j():z=d();function H(s,m){var w=this,T=new this.constructor(re);T[ee]===void 0&&je(T);var x=w._state;if(x){var k=arguments[x-1];f(function(){return Ae(x,T,k,w._result)})}else Oe(w,T,s,m);return T}function K(s){var m=this;if(s&&typeof s=="object"&&s.constructor===m)return s;var w=new m(re);return we(w,s),w}var ee=Math.random().toString(36).substring(2);function re(){}var se=void 0,ye=1,ge=2;function Ie(){return new TypeError("You cannot resolve a promise with itself")}function xe(){return new TypeError("A promises callback cannot return that same promise.")}function ke(s,m,w,T){try{s.call(m,w,T)}catch(x){return x}}function ae(s,m,w){f(function(T){var x=!1,k=ke(w,m,function($){x||(x=!0,m!==$?we(T,$):ie(T,$))},function($){x||(x=!0,Y(T,$))},"Settle: "+(T._label||" unknown promise"));!x&&k&&(x=!0,Y(T,k))},s)}function Me(s,m){m._state===ye?ie(s,m._result):m._state===ge?Y(s,m._result):Oe(m,void 0,function(w){return we(s,w)},function(w){return Y(s,w)})}function Fe(s,m,w){m.constructor===s.constructor&&w===H&&m.constructor.resolve===K?Me(s,m):w===void 0?ie(s,m):y(w)?ae(s,m,w):ie(s,m)}function we(s,m){if(s===m)Y(s,Ie());else if(l(m)){var w=void 0;try{w=m.then}catch(T){Y(s,T);return}Fe(s,m,w)}else ie(s,m)}function Pe(s){s._onerror&&s._onerror(s._result),Re(s)}function ie(s,m){s._state===se&&(s._result=m,s._state=ye,s._subscribers.length!==0&&f(Re,s))}function Y(s,m){s._state===se&&(s._state=ge,s._result=m,f(Pe,s))}function Oe(s,m,w,T){var x=s._subscribers,k=x.length;s._onerror=null,x[k]=m,x[k+ye]=w,x[k+ge]=T,k===0&&s._state&&f(Re,s)}function Re(s){var m=s._subscribers,w=s._state;if(m.length!==0){for(var T=void 0,x=void 0,k=s._result,$=0;$<m.length;$+=3)T=m[$],x=m[$+w],T?Ae(w,T,x,k):x(k);s._subscribers.length=0}}function Ae(s,m,w,T){var x=y(w),k=void 0,$=void 0,O=!0;if(x){try{k=w(T)}catch(R){O=!1,$=R}if(m===k){Y(m,xe());return}}else k=T;m._state!==se||(x&&O?we(m,k):O===!1?Y(m,$):s===ye?ie(m,k):s===ge&&Y(m,k))}function Se(s,m){try{m(function(T){we(s,T)},function(T){Y(s,T)})}catch(w){Y(s,w)}}var Le=0;function Ce(){return Le++}function je(s){s[ee]=Le++,s._state=void 0,s._result=void 0,s._subscribers=[]}function a(){return new Error("Array Methods must be provided an Array")}var b=function(){function s(m,w){this._instanceConstructor=m,this.promise=new m(re),this.promise[ee]||je(this.promise),u(w)?(this.length=w.length,this._remaining=w.length,this._result=new Array(this.length),this.length===0?ie(this.promise,this._result):(this.length=this.length||0,this._enumerate(w),this._remaining===0&&ie(this.promise,this._result))):Y(this.promise,a())}return s.prototype._enumerate=function(w){for(var T=0;this._state===se&&T<w.length;T++)this._eachEntry(w[T],T)},s.prototype._eachEntry=function(w,T){var x=this._instanceConstructor,k=x.resolve;if(k===K){var $=void 0,O=void 0,R=!1;try{$=w.then}catch(G){R=!0,O=G}if($===H&&w._state!==se)this._settledAt(w._state,T,w._result);else if(typeof $!="function")this._remaining--,this._result[T]=w;else if(x===D){var q=new x(re);R?Y(q,O):Fe(q,w,$),this._willSettleAt(q,T)}else this._willSettleAt(new x(function(G){return G(w)}),T)}else this._willSettleAt(k(w),T)},s.prototype._settledAt=function(w,T,x){var k=this.promise;k._state===se&&(this._remaining--,w===ge?Y(k,x):this._result[T]=x),this._remaining===0&&ie(k,this._result)},s.prototype._willSettleAt=function(w,T){var x=this;Oe(w,void 0,function(k){return x._settledAt(ye,T,k)},function(k){return x._settledAt(ge,T,k)})},s}();function F(s){return new b(this,s).promise}function A(s){var m=this;return u(s)?new m(function(w,T){for(var x=s.length,k=0;k<x;k++)m.resolve(s[k]).then(w,T)}):new m(function(w,T){return T(new TypeError("You must pass an array to race."))})}function L(s){var m=this,w=new m(re);return Y(w,s),w}function S(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ue(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var D=function(){function s(m){this[ee]=Ce(),this._result=this._state=void 0,this._subscribers=[],re!==m&&(typeof m!="function"&&S(),this instanceof s?Se(this,m):ue())}return s.prototype.catch=function(w){return this.then(null,w)},s.prototype.finally=function(w){var T=this,x=T.constructor;return y(w)?T.then(function(k){return x.resolve(w()).then(function(){return k})},function(k){return x.resolve(w()).then(function(){throw k})}):T.then(w,w)},s}();D.prototype.then=H,D.all=F,D.race=A,D.resolve=K,D.reject=L,D._setScheduler=E,D._setAsap=v,D._asap=f;function fe(){var s=void 0;if(typeof pe<"u")s=pe;else if(typeof self<"u")s=self;else try{s=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var m=s.Promise;if(m){var w=null;try{w=Object.prototype.toString.call(m.resolve())}catch{}if(w==="[object Promise]"&&!m.cast)return}s.Promise=D}return D.polyfill=fe,D.Promise=D,D})})(Qe),ze.polyfill(),function(t){var e=function(){try{return!!Symbol.iterator}catch{return!1}},l=e(),y=function(f){var E={next:function(){var v=f.shift();return{done:v===void 0,value:v}}};return l&&(E[Symbol.iterator]=function(){return E}),E},r=function(f){return encodeURIComponent(f).replace(/%20/g,"+")},u=function(f){return decodeURIComponent(String(f).replace(/\+/g," "))},i=function(){var f=function(v){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var n=typeof v;if(n!=="undefined")if(n==="string")v!==""&&this._fromString(v);else if(v instanceof f){var C=this;v.forEach(function(oe,ce){C.append(ce,oe)})}else if(v!==null&&n==="object")if(Object.prototype.toString.call(v)==="[object Array]")for(var B=0;B<v.length;B++){var V=v[B];if(Object.prototype.toString.call(V)==="[object Array]"||V.length!==2)this.append(V[0],V[1]);else throw new TypeError("Expected [string, any] as entry at index "+B+" of URLSearchParams's input")}else for(var X in v)v.hasOwnProperty(X)&&this.append(X,v[X]);else throw new TypeError("Unsupported input's type for URLSearchParams")},E=f.prototype;E.append=function(v,n){v in this._entries?this._entries[v].push(String(n)):this._entries[v]=[String(n)]},E.delete=function(v){delete this._entries[v]},E.get=function(v){return v in this._entries?this._entries[v][0]:null},E.getAll=function(v){return v in this._entries?this._entries[v].slice(0):[]},E.has=function(v){return v in this._entries},E.set=function(v,n){this._entries[v]=[String(n)]},E.forEach=function(v,n){var C;for(var B in this._entries)if(this._entries.hasOwnProperty(B)){C=this._entries[B];for(var V=0;V<C.length;V++)v.call(n,C[V],B,this)}},E.keys=function(){var v=[];return this.forEach(function(n,C){v.push(C)}),y(v)},E.values=function(){var v=[];return this.forEach(function(n){v.push(n)}),y(v)},E.entries=function(){var v=[];return this.forEach(function(n,C){v.push([C,n])}),y(v)},l&&(E[Symbol.iterator]=E.entries),E.toString=function(){var v=[];return this.forEach(function(n,C){v.push(r(C)+"="+r(n))}),v.join("&")},t.URLSearchParams=f},h=function(){try{var f=t.URLSearchParams;return new f("?a=1").toString()==="a=1"&&typeof f.prototype.set=="function"&&typeof f.prototype.entries=="function"}catch{return!1}};h()||i();var g=t.URLSearchParams.prototype;typeof g.sort!="function"&&(g.sort=function(){var f=this,E=[];this.forEach(function(n,C){E.push([C,n]),f._entries||f.delete(C)}),E.sort(function(n,C){return n[0]<C[0]?-1:n[0]>C[0]?1:0}),f._entries&&(f._entries={});for(var v=0;v<E.length;v++)this.append(E[v][0],E[v][1])}),typeof g._fromString!="function"&&Object.defineProperty(g,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(f){if(this._entries)this._entries={};else{var E=[];this.forEach(function(B,V){E.push(V)});for(var v=0;v<E.length;v++)this.delete(E[v])}f=f.replace(/^\?/,"");for(var n=f.split("&"),C,v=0;v<n.length;v++)C=n[v].split("="),this.append(u(C[0]),C.length>1?u(C[1]):"")}})}(typeof pe<"u"?pe:typeof window<"u"?window:typeof self<"u"?self:pe),function(t){var e=function(){try{var r=new t.URL("b","http://a");return r.pathname="c d",r.href==="http://a/c%20d"&&r.searchParams}catch{return!1}},l=function(){var r=t.URL,u=function(g,f){typeof g!="string"&&(g=String(g)),f&&typeof f!="string"&&(f=String(f));var E=document,v;if(f&&(t.location===void 0||f!==t.location.href)){f=f.toLowerCase(),E=document.implementation.createHTMLDocument(""),v=E.createElement("base"),v.href=f,E.head.appendChild(v);try{if(v.href.indexOf(f)!==0)throw new Error(v.href)}catch(o){throw new Error("URL unable to set base "+f+" due to "+o)}}var n=E.createElement("a");n.href=g,v&&(E.body.appendChild(n),n.href=n.href);var C=E.createElement("input");if(C.type="url",C.value=g,n.protocol===":"||!/:/.test(n.href)||!C.checkValidity()&&!f)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:n});var B=new t.URLSearchParams(this.search),V=!0,X=!0,oe=this;["append","delete","set"].forEach(function(o){var c=B[o];B[o]=function(){c.apply(B,arguments),V&&(X=!1,oe.search=B.toString(),X=!0)}}),Object.defineProperty(this,"searchParams",{value:B,enumerable:!0});var ce=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==ce&&(ce=this.search,X&&(V=!1,this.searchParams._fromString(this.search),V=!0))}})},i=u.prototype,h=function(g){Object.defineProperty(i,g,{get:function(){return this._anchorElement[g]},set:function(f){this._anchorElement[g]=f},enumerable:!0})};["hash","host","hostname","port","protocol"].forEach(function(g){h(g)}),Object.defineProperty(i,"search",{get:function(){return this._anchorElement.search},set:function(g){this._anchorElement.search=g,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(i,{toString:{get:function(){var g=this;return function(){return g.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(g){this._anchorElement.href=g,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(g){this._anchorElement.pathname=g},enumerable:!0},origin:{get:function(){var g={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],f=this._anchorElement.port!=g&&this._anchorElement.port!=="";return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(f?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(g){},enumerable:!0},username:{get:function(){return""},set:function(g){},enumerable:!0}}),u.createObjectURL=function(g){return r.createObjectURL.apply(r,arguments)},u.revokeObjectURL=function(g){return r.revokeObjectURL.apply(r,arguments)},t.URL=u};if(e()||l(),t.location!==void 0&&!("origin"in t.location)){var y=function(){return t.location.protocol+"//"+t.location.hostname+(t.location.port?":"+t.location.port:"")};try{Object.defineProperty(t.location,"origin",{get:y,enumerable:!0})}catch{setInterval(function(){t.location.origin=y()},100)}}}(typeof pe<"u"?pe:typeof window<"u"?window:typeof self<"u"?self:pe),function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function t(o){try{return o.defaultView&&o.defaultView.frameElement||null}catch{return null}}var e=function(o){for(var c=o,d=t(c);d;)c=d.ownerDocument,d=t(c);return c}(window.document),l=[],y=null,r=null;function u(o){this.time=o.time,this.target=o.target,this.rootBounds=B(o.rootBounds),this.boundingClientRect=B(o.boundingClientRect),this.intersectionRect=B(o.intersectionRect||C()),this.isIntersecting=!!o.intersectionRect;var c=this.boundingClientRect,d=c.width*c.height,p=this.intersectionRect,P=p.width*p.height;d?this.intersectionRatio=Number((P/d).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function i(o,c){var d=c||{};if(typeof o!="function")throw new Error("callback must be a function");if(d.root&&d.root.nodeType!=1&&d.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=g(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=o,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(d.rootMargin),this.thresholds=this._initThresholds(d.threshold),this.root=d.root||null,this.rootMargin=this._rootMarginValues.map(function(p){return p.value+p.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}i.prototype.THROTTLE_TIMEOUT=100,i.prototype.POLL_INTERVAL=null,i.prototype.USE_MUTATION_OBSERVER=!0,i._setupCrossOriginUpdater=function(){return y||(y=function(o,c){!o||!c?r=C():r=V(o,c),l.forEach(function(d){d._checkForIntersections()})}),y},i._resetCrossOriginUpdater=function(){y=null,r=null},i.prototype.observe=function(o){var c=this._observationTargets.some(function(d){return d.element==o});if(!c){if(!(o&&o.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:o,entry:null}),this._monitorIntersections(o.ownerDocument),this._checkForIntersections()}},i.prototype.unobserve=function(o){this._observationTargets=this._observationTargets.filter(function(c){return c.element!=o}),this._unmonitorIntersections(o.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},i.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},i.prototype.takeRecords=function(){var o=this._queuedEntries.slice();return this._queuedEntries=[],o},i.prototype._initThresholds=function(o){var c=o||[0];return Array.isArray(c)||(c=[c]),c.sort().filter(function(d,p,P){if(typeof d!="number"||isNaN(d)||d<0||d>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return d!==P[p-1]})},i.prototype._parseRootMargin=function(o){var c=o||"0px",d=c.split(/\s+/).map(function(p){var P=/^(-?\d*\.?\d+)(px|%)$/.exec(p);if(!P)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(P[1]),unit:P[2]}});return d[1]=d[1]||d[0],d[2]=d[2]||d[0],d[3]=d[3]||d[1],d},i.prototype._monitorIntersections=function(o){var c=o.defaultView;if(c&&this._monitoringDocuments.indexOf(o)==-1){var d=this._checkForIntersections,p=null,P=null;this.POLL_INTERVAL?p=c.setInterval(d,this.POLL_INTERVAL):(f(c,"resize",d,!0),f(o,"scroll",d,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in c&&(P=new c.MutationObserver(d),P.observe(o,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(o),this._monitoringUnsubscribes.push(function(){var H=o.defaultView;H&&(p&&H.clearInterval(p),E(H,"resize",d,!0)),E(o,"scroll",d,!0),P&&P.disconnect()});var j=this.root&&(this.root.ownerDocument||this.root)||e;if(o!=j){var z=t(o);z&&this._monitorIntersections(z.ownerDocument)}}},i.prototype._unmonitorIntersections=function(o){var c=this._monitoringDocuments.indexOf(o);if(c!=-1){var d=this.root&&(this.root.ownerDocument||this.root)||e,p=this._observationTargets.some(function(z){var H=z.element.ownerDocument;if(H==o)return!0;for(;H&&H!=d;){var K=t(H);if(H=K&&K.ownerDocument,H==o)return!0}return!1});if(!p){var P=this._monitoringUnsubscribes[c];if(this._monitoringDocuments.splice(c,1),this._monitoringUnsubscribes.splice(c,1),P(),o!=d){var j=t(o);j&&this._unmonitorIntersections(j.ownerDocument)}}}},i.prototype._unmonitorAllIntersections=function(){var o=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var c=0;c<o.length;c++)o[c]()},i.prototype._checkForIntersections=function(){if(!(!this.root&&y&&!r)){var o=this._rootIsInDom(),c=o?this._getRootRect():C();this._observationTargets.forEach(function(d){var p=d.element,P=n(p),j=this._rootContainsTarget(p),z=d.entry,H=o&&j&&this._computeTargetAndRootIntersection(p,P,c),K=null;this._rootContainsTarget(p)?(!y||this.root)&&(K=c):K=C();var ee=d.entry=new u({time:h(),target:p,boundingClientRect:P,rootBounds:K,intersectionRect:H});z?o&&j?this._hasCrossedThreshold(z,ee)&&this._queuedEntries.push(ee):z&&z.isIntersecting&&this._queuedEntries.push(ee):this._queuedEntries.push(ee)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},i.prototype._computeTargetAndRootIntersection=function(o,c,d){if(window.getComputedStyle(o).display!="none"){for(var p=c,P=oe(o),j=!1;!j&&P;){var z=null,H=P.nodeType==1?window.getComputedStyle(P):{};if(H.display=="none")return null;if(P==this.root||P.nodeType==9)if(j=!0,P==this.root||P==e)y&&!this.root?!r||r.width==0&&r.height==0?(P=null,z=null,p=null):z=r:z=d;else{var K=oe(P),ee=K&&n(K),re=K&&this._computeTargetAndRootIntersection(K,ee,d);ee&&re?(P=K,z=V(ee,re)):(P=null,p=null)}else{var se=P.ownerDocument;P!=se.body&&P!=se.documentElement&&H.overflow!="visible"&&(z=n(P))}if(z&&(p=v(z,p)),!p)break;P=P&&oe(P)}return p}},i.prototype._getRootRect=function(){var o;if(this.root&&!ce(this.root))o=n(this.root);else{var c=ce(this.root)?this.root:e,d=c.documentElement,p=c.body;o={top:0,left:0,right:d.clientWidth||p.clientWidth,width:d.clientWidth||p.clientWidth,bottom:d.clientHeight||p.clientHeight,height:d.clientHeight||p.clientHeight}}return this._expandRectByRootMargin(o)},i.prototype._expandRectByRootMargin=function(o){var c=this._rootMarginValues.map(function(p,P){return p.unit=="px"?p.value:p.value*(P%2?o.width:o.height)/100}),d={top:o.top-c[0],right:o.right+c[1],bottom:o.bottom+c[2],left:o.left-c[3]};return d.width=d.right-d.left,d.height=d.bottom-d.top,d},i.prototype._hasCrossedThreshold=function(o,c){var d=o&&o.isIntersecting?o.intersectionRatio||0:-1,p=c.isIntersecting?c.intersectionRatio||0:-1;if(d!==p)for(var P=0;P<this.thresholds.length;P++){var j=this.thresholds[P];if(j==d||j==p||j<d!=j<p)return!0}},i.prototype._rootIsInDom=function(){return!this.root||X(e,this.root)},i.prototype._rootContainsTarget=function(o){var c=this.root&&(this.root.ownerDocument||this.root)||e;return X(c,o)&&(!this.root||c==o.ownerDocument)},i.prototype._registerInstance=function(){l.indexOf(this)<0&&l.push(this)},i.prototype._unregisterInstance=function(){var o=l.indexOf(this);o!=-1&&l.splice(o,1)};function h(){return window.performance&&performance.now&&performance.now()}function g(o,c){var d=null;return function(){d||(d=setTimeout(function(){o(),d=null},c))}}function f(o,c,d,p){typeof o.addEventListener=="function"?o.addEventListener(c,d,p||!1):typeof o.attachEvent=="function"&&o.attachEvent("on"+c,d)}function E(o,c,d,p){typeof o.removeEventListener=="function"?o.removeEventListener(c,d,p||!1):typeof o.detachEvent=="function"&&o.detachEvent("on"+c,d)}function v(o,c){var d=Math.max(o.top,c.top),p=Math.min(o.bottom,c.bottom),P=Math.max(o.left,c.left),j=Math.min(o.right,c.right),z=j-P,H=p-d;return z>=0&&H>=0&&{top:d,bottom:p,left:P,right:j,width:z,height:H}||null}function n(o){var c;try{c=o.getBoundingClientRect()}catch{}return c?(c.width&&c.height||(c={top:c.top,right:c.right,bottom:c.bottom,left:c.left,width:c.right-c.left,height:c.bottom-c.top}),c):C()}function C(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function B(o){return!o||"x"in o?o:{top:o.top,y:o.top,bottom:o.bottom,left:o.left,x:o.left,right:o.right,width:o.width,height:o.height}}function V(o,c){var d=c.top-o.top,p=c.left-o.left;return{top:d,left:p,height:c.height,width:c.width,bottom:d+c.height,right:p+c.width}}function X(o,c){for(var d=c;d;){if(d==o)return!0;d=oe(d)}return!1}function oe(o){var c=o.parentNode;return o.nodeType==9&&o!=e?t(o):(c&&c.assignedSlot&&(c=c.assignedSlot.parentNode),c&&c.nodeType==11&&c.host?c.host:c)}function ce(o){return o&&o.nodeType===9}window.IntersectionObserver=i,window.IntersectionObserverEntry=u}();var Z=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Z<"u"&&Z,ne={searchParams:"URLSearchParams"in Z,iterable:"Symbol"in Z&&"iterator"in Symbol,blob:"FileReader"in Z&&"Blob"in Z&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in Z,arrayBuffer:"ArrayBuffer"in Z};function Ze(t){return t&&DataView.prototype.isPrototypeOf(t)}if(ne.arrayBuffer)var et=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],tt=ArrayBuffer.isView||function(t){return t&&et.indexOf(Object.prototype.toString.call(t))>-1};function Te(t){if(typeof t!="string"&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||t==="")throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function Ue(t){return typeof t!="string"&&(t=String(t)),t}function Be(t){var e={next:function(){var l=t.shift();return{done:l===void 0,value:l}}};return ne.iterable&&(e[Symbol.iterator]=function(){return e}),e}function J(t){this.map={},t instanceof J?t.forEach(function(e,l){this.append(l,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}J.prototype.append=function(t,e){t=Te(t),e=Ue(e);var l=this.map[t];this.map[t]=l?l+", "+e:e},J.prototype.delete=function(t){delete this.map[Te(t)]},J.prototype.get=function(t){return t=Te(t),this.has(t)?this.map[t]:null},J.prototype.has=function(t){return this.map.hasOwnProperty(Te(t))},J.prototype.set=function(t,e){this.map[Te(t)]=Ue(e)},J.prototype.forEach=function(t,e){for(var l in this.map)this.map.hasOwnProperty(l)&&t.call(e,this.map[l],l,this)},J.prototype.keys=function(){var t=[];return this.forEach(function(e,l){t.push(l)}),Be(t)},J.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),Be(t)},J.prototype.entries=function(){var t=[];return this.forEach(function(e,l){t.push([l,e])}),Be(t)},ne.iterable&&(J.prototype[Symbol.iterator]=J.prototype.entries);function Ne(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function $e(t){return new Promise(function(e,l){t.onload=function(){e(t.result)},t.onerror=function(){l(t.error)}})}function nt(t){var e=new FileReader,l=$e(e);return e.readAsArrayBuffer(t),l}function rt(t){var e=new FileReader,l=$e(e);return e.readAsText(t),l}function it(t){for(var e=new Uint8Array(t),l=new Array(e.length),y=0;y<e.length;y++)l[y]=String.fromCharCode(e[y]);return l.join("")}function Ke(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function Ge(){return this.bodyUsed=!1,this._initBody=function(t){this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?typeof t=="string"?this._bodyText=t:ne.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:ne.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:ne.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():ne.arrayBuffer&&ne.blob&&Ze(t)?(this._bodyArrayBuffer=Ke(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):ne.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||tt(t))?this._bodyArrayBuffer=Ke(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||(typeof t=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):ne.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ne.blob&&(this.blob=function(){var t=Ne(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=Ne(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(nt)}),this.text=function(){var t=Ne(this);if(t)return t;if(this._bodyBlob)return rt(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(it(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ne.formData&&(this.formData=function(){return this.text().then(at)}),this.json=function(){return this.text().then(JSON.parse)},this}var ot=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function st(t){var e=t.toUpperCase();return ot.indexOf(e)>-1?e:t}function ve(t,e){if(!(this instanceof ve))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var l=e.body;if(t instanceof ve){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new J(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!l&&t._bodyInit!=null&&(l=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new J(e.headers)),this.method=st(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&l)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(l),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var y=/([?&])_=[^&]*/;if(y.test(this.url))this.url=this.url.replace(y,"$1_="+new Date().getTime());else{var r=/\?/;this.url+=(r.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}ve.prototype.clone=function(){return new ve(this,{body:this._bodyInit})};function at(t){var e=new FormData;return t.trim().split("&").forEach(function(l){if(l){var y=l.split("="),r=y.shift().replace(/\+/g," "),u=y.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(u))}}),e}function ut(t){var e=new J,l=t.replace(/\r?\n[\t ]+/g," ");return l.split("\r").map(function(y){return y.indexOf(`
`)===0?y.substr(1,y.length):y}).forEach(function(y){var r=y.split(":"),u=r.shift().trim();if(u){var i=r.join(":").trim();e.append(u,i)}}),e}Ge.call(ve.prototype);function he(t,e){if(!(this instanceof he))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new J(e.headers),this.url=e.url||"",this._initBody(t)}Ge.call(he.prototype),he.prototype.clone=function(){return new he(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new J(this.headers),url:this.url})},he.error=function(){var t=new he(null,{status:0,statusText:""});return t.type="error",t};var ct=[301,302,303,307,308];he.redirect=function(t,e){if(ct.indexOf(e)===-1)throw new RangeError("Invalid status code");return new he(null,{status:e,headers:{location:t}})};var be=Z.DOMException;try{new be}catch{be=function(e,l){this.message=e,this.name=l;var y=Error(e);this.stack=y.stack},be.prototype=Object.create(Error.prototype),be.prototype.constructor=be}function Je(t,e){return new Promise(function(l,y){var r=new ve(t,e);if(r.signal&&r.signal.aborted)return y(new be("Aborted","AbortError"));var u=new XMLHttpRequest;function i(){u.abort()}u.onload=function(){var g={status:u.status,statusText:u.statusText,headers:ut(u.getAllResponseHeaders()||"")};g.url="responseURL"in u?u.responseURL:g.headers.get("X-Request-URL");var f="response"in u?u.response:u.responseText;setTimeout(function(){l(new he(f,g))},0)},u.onerror=function(){setTimeout(function(){y(new TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){y(new TypeError("Network request failed"))},0)},u.onabort=function(){setTimeout(function(){y(new be("Aborted","AbortError"))},0)};function h(g){try{return g===""&&Z.location.href?Z.location.href:g}catch{return g}}u.open(r.method,h(r.url),!0),r.credentials==="include"?u.withCredentials=!0:r.credentials==="omit"&&(u.withCredentials=!1),"responseType"in u&&(ne.blob?u.responseType="blob":ne.arrayBuffer&&r.headers.get("Content-Type")&&r.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(u.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof J)?Object.getOwnPropertyNames(e.headers).forEach(function(g){u.setRequestHeader(g,Ue(e.headers[g]))}):r.headers.forEach(function(g,f){u.setRequestHeader(f,g)}),r.signal&&(r.signal.addEventListener("abort",i),u.onreadystatechange=function(){u.readyState===4&&r.signal.removeEventListener("abort",i)}),u.send(typeof r._bodyInit>"u"?null:r._bodyInit)})}Je.polyfill=!0,Z.fetch||(Z.fetch=Je,Z.Headers=J,Z.Request=ve,Z.Response=he);var We={},ft={get exports(){return We},set exports(t){We=t}};(function(t){(function(e){if(typeof window>"u")return;var l=0,y=!1,r=!1,u="message",i=u.length,h="[iFrameSizer]",g=h.length,f=null,E=window.requestAnimationFrame,v={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},n={},C=null,B={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return!0},onClosed:function(){},onInit:function(){},onMessage:function(){j("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return!0}};function V(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function X(a,b,F){a.addEventListener(b,F,!1)}function oe(a,b,F){a.removeEventListener(b,F,!1)}function ce(){var a=["moz","webkit","o","ms"],b;for(b=0;b<a.length&&!E;b+=1)E=window[a[b]+"RequestAnimationFrame"];E?E=E.bind(window):p("setup","RequestAnimationFrame not supported")}function o(a){var b="Host page: "+a;return window.top!==window.self&&(b=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+a:"Nested host page: "+a),b}function c(a){return h+"["+o(a)+"]"}function d(a){return n[a]?n[a].log:y}function p(a,b){z("log",a,b,d(a))}function P(a,b){z("info",a,b,d(a))}function j(a,b){z("warn",a,b,!0)}function z(a,b,F,A){A===!0&&typeof window.console=="object"&&console[a](c(b),F)}function H(a){function b(){function _(){xe(U),ye(I),Ee("onResized",U)}S("Height"),S("Width"),ke(_,U,"init")}function F(){var _=de.substr(g).split(":"),M=_[1]?parseInt(_[1],10):0,N=n[_[0]]&&n[_[0]].iframe,W=getComputedStyle(N);return{iframe:N,id:_[0],height:M+A(W)+L(W),width:_[2],type:_[3]}}function A(_){if(_.boxSizing!=="border-box")return 0;var M=_.paddingTop?parseInt(_.paddingTop,10):0,N=_.paddingBottom?parseInt(_.paddingBottom,10):0;return M+N}function L(_){if(_.boxSizing!=="border-box")return 0;var M=_.borderTopWidth?parseInt(_.borderTopWidth,10):0,N=_.borderBottomWidth?parseInt(_.borderBottomWidth,10):0;return M+N}function S(_){var M=Number(n[I]["max"+_]),N=Number(n[I]["min"+_]),W=_.toLowerCase(),Q=Number(U[W]);p(I,"Checking "+W+" is in range "+N+"-"+M),Q<N&&(Q=N,p(I,"Set "+W+" to min value")),Q>M&&(Q=M,p(I,"Set "+W+" to max value")),U[W]=""+Q}function ue(){function _(){function W(){var te=0,me=!1;for(p(I,"Checking connection is from allowed list of origins: "+N);te<N.length;te++)if(N[te]===M){me=!0;break}return me}function Q(){var te=n[I]&&n[I].remoteHost;return p(I,"Checking connection is from: "+te),M===te}return N.constructor===Array?W():Q()}var M=a.origin,N=n[I]&&n[I].checkOrigin;if(N&&""+M!="null"&&!_())throw new Error("Unexpected message received from: "+M+" for "+U.iframe.id+". Message was: "+a.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function D(){return h===(""+de).substr(0,g)&&de.substr(g).split(":")[0]in n}function fe(){var _=U.type in{true:1,false:1,undefined:1};return _&&p(I,"Ignoring init message from meta parent page"),_}function s(_){return de.substr(de.indexOf(":")+i+_)}function m(_){p(I,"onMessage passed: {iframe: "+U.iframe.id+", message: "+_+"}"),Ee("onMessage",{iframe:U.iframe,message:JSON.parse(_)}),p(I,"--")}function w(){var _=document.body.getBoundingClientRect(),M=U.iframe.getBoundingClientRect();return JSON.stringify({iframeHeight:M.height,iframeWidth:M.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(M.top-_.top,10),offsetLeft:parseInt(M.left-_.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})}function T(_,M){function N(){ae("Send Page Info","pageInfo:"+w(),_,M)}Y(N,32,M)}function x(){function _(Q,te){function me(){n[W]?T(n[W].iframe,W):M()}["scroll","resize"].forEach(function(Xe){p(W,Q+Xe+" listener for sendPageInfo"),te(window,Xe,me)})}function M(){_("Remove ",oe)}function N(){_("Add ",X)}var W=I;N(),n[W]&&(n[W].stopPageInfo=M)}function k(){n[I]&&n[I].stopPageInfo&&(n[I].stopPageInfo(),delete n[I].stopPageInfo)}function $(){var _=!0;return U.iframe===null&&(j(I,"IFrame ("+U.id+") not found"),_=!1),_}function O(_){var M=_.getBoundingClientRect();return se(I),{x:Math.floor(Number(M.left)+Number(f.x)),y:Math.floor(Number(M.top)+Number(f.y))}}function R(_){function M(){f=te,q(),p(I,"--")}function N(){return{x:Number(U.width)+Q.x,y:Number(U.height)+Q.y}}function W(){window.parentIFrame?window.parentIFrame["scrollTo"+(_?"Offset":"")](te.x,te.y):j(I,"Unable to scroll to requested position, window.parentIFrame not found")}var Q=_?O(U.iframe):{x:0,y:0},te=N();p(I,"Reposition requested from iFrame (offset x:"+Q.x+" y:"+Q.y+")"),window.top!==window.self?W():M()}function q(){Ee("onScroll",f)!==!1?ye(I):ge()}function G(_){function M(){var me=O(te);p(I,"Moving to in page link (#"+W+") at x: "+me.x+" y: "+me.y),f={x:me.x,y:me.y},q(),p(I,"--")}function N(){window.parentIFrame?window.parentIFrame.moveToAnchor(W):p(I,"In page link #"+W+" not found and window.parentIFrame not found")}var W=_.split("#")[1]||"",Q=decodeURIComponent(W),te=document.getElementById(Q)||document.getElementsByName(Q)[0];te?M():window.top!==window.self?N():p(I,"In page link #"+W+" not found")}function le(_){var M={};if(Number(U.width)===0&&Number(U.height)===0){var N=s(9).split(":");M={x:N[1],y:N[0]}}else M={x:U.width,y:U.height};Ee(_,{iframe:U.iframe,screenX:Number(M.x),screenY:Number(M.y),type:U.type})}function Ee(_,M){return K(I,_,M)}function He(){switch(n[I]&&n[I].firstRun&&De(),U.type){case"close":re(U.iframe);break;case"message":m(s(6));break;case"mouseenter":le("onMouseEnter");break;case"mouseleave":le("onMouseLeave");break;case"autoResize":n[I].autoResize=JSON.parse(s(9));break;case"scrollTo":R(!1);break;case"scrollToOffset":R(!0);break;case"pageInfo":T(n[I]&&n[I].iframe,I),x();break;case"pageInfoStop":k();break;case"inPageLink":G(s(9));break;case"reset":Ie(U);break;case"init":b(),Ee("onInit",U.iframe);break;default:Number(U.width)===0&&Number(U.height)===0?j("Unsupported message received ("+U.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):b()}}function qe(_){var M=!0;return n[_]||(M=!1,j(U.type+" No settings for "+_+". Message was: "+de)),M}function Ve(){for(var _ in n)ae("iFrame requested init",Me(_),n[_].iframe,_)}function De(){n[I]&&(n[I].firstRun=!1)}var de=a.data,U={},I=null;de==="[iFrameResizerChild]Ready"?Ve():D()?(U=F(),I=U.id,n[I]&&(n[I].loaded=!0),!fe()&&qe(I)&&(p(I,"Received: "+de),$()&&ue()&&He())):P(I,"Ignored: "+de)}function K(a,b,F){var A=null,L=null;if(n[a])if(A=n[a][b],typeof A=="function")L=A(F);else throw new TypeError(b+" on iFrame["+a+"] is not a function");return L}function ee(a){var b=a.id;delete n[b]}function re(a){var b=a.id;if(K(b,"onClose",b)===!1){p(b,"Close iframe cancelled by onClose event");return}p(b,"Removing iFrame: "+b);try{a.parentNode&&a.parentNode.removeChild(a)}catch(F){j(F)}K(b,"onClosed",b),p(b,"--"),ee(a)}function se(a){f===null&&(f={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop},p(a,"Get page position: "+f.x+","+f.y))}function ye(a){f!==null&&(window.scrollTo(f.x,f.y),p(a,"Set page position: "+f.x+","+f.y),ge())}function ge(){f=null}function Ie(a){function b(){xe(a),ae("reset","reset",a.iframe,a.id)}p(a.id,"Size reset requested by "+(a.type==="init"?"host page":"iFrame")),se(a.id),ke(b,a,"reset")}function xe(a){function b(S){if(!a.id){p("undefined","messageData id not set");return}a.iframe.style[S]=a[S]+"px",p(a.id,"IFrame ("+L+") "+S+" set to "+a[S]+"px")}function F(S){!r&&a[S]==="0"&&(r=!0,p(L,"Hidden iFrame detected, creating visibility listener"),Oe())}function A(S){b(S),F(S)}var L=a.iframe.id;n[L]&&(n[L].sizeHeight&&A("height"),n[L].sizeWidth&&A("width"))}function ke(a,b,F){F!==b.type&&E&&!window.jasmine?(p(b.id,"Requesting animation frame"),E(a)):a()}function ae(a,b,F,A,L){function S(){var m=n[A]&&n[A].targetOrigin;p(A,"["+a+"] Sending msg to iframe["+A+"] ("+b+") targetOrigin: "+m),F.contentWindow.postMessage(h+b,m)}function ue(){j(A,"["+a+"] IFrame("+A+") not found")}function D(){F&&"contentWindow"in F&&F.contentWindow!==null?S():ue()}function fe(){function m(){n[A]&&!n[A].loaded&&!s&&(s=!0,j(A,"IFrame has not responded within "+n[A].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}L&&n[A]&&n[A].warningTimeout&&(n[A].msgTimeout=setTimeout(m,n[A].warningTimeout))}var s=!1;A=A||F.id,n[A]&&(D(),fe())}function Me(a){return a+":"+n[a].bodyMarginV1+":"+n[a].sizeWidth+":"+n[a].log+":"+n[a].interval+":"+n[a].enablePublicMethods+":"+n[a].autoResize+":"+n[a].bodyMargin+":"+n[a].heightCalculationMethod+":"+n[a].bodyBackground+":"+n[a].bodyPadding+":"+n[a].tolerance+":"+n[a].inPageLinks+":"+n[a].resizeFrom+":"+n[a].widthCalculationMethod+":"+n[a].mouseEvents}function Fe(a){return typeof a=="number"}function we(a,b){function F(){function R(G){var le=n[O][G];le!==1/0&&le!==0&&(a.style[G]=Fe(le)?le+"px":le,p(O,"Set "+G+" = "+a.style[G]))}function q(G){if(n[O]["min"+G]>n[O]["max"+G])throw new Error("Value for min"+G+" can not be greater than max"+G)}q("Height"),q("Width"),R("maxHeight"),R("minHeight"),R("maxWidth"),R("minWidth")}function A(){var R=b&&b.id||B.id+l++;return document.getElementById(R)!==null&&(R+=l++),R}function L(R){return R===""&&(a.id=R=A(),y=(b||{}).log,p(R,"Added missing iframe ID: "+R+" ("+a.src+")")),R}function S(){switch(p(O,"IFrame scrolling "+(n[O]&&n[O].scrolling?"enabled":"disabled")+" for "+O),a.style.overflow=(n[O]&&n[O].scrolling)===!1?"hidden":"auto",n[O]&&n[O].scrolling){case"omit":break;case!0:a.scrolling="yes";break;case!1:a.scrolling="no";break;default:a.scrolling=n[O]?n[O].scrolling:"no"}}function ue(){(typeof(n[O]&&n[O].bodyMargin)=="number"||(n[O]&&n[O].bodyMargin)==="0")&&(n[O].bodyMarginV1=n[O].bodyMargin,n[O].bodyMargin=""+n[O].bodyMargin+"px")}function D(){var R=n[O]&&n[O].firstRun,q=n[O]&&n[O].heightCalculationMethod in v;!R&&q&&Ie({iframe:a,height:0,width:0,type:"init"})}function fe(){n[O]&&(n[O].iframe.iFrameResizer={close:re.bind(null,n[O].iframe),removeListeners:ee.bind(null,n[O].iframe),resize:ae.bind(null,"Window resize","resize",n[O].iframe),moveToAnchor:function(R){ae("Move to anchor","moveToAnchor:"+R,n[O].iframe,O)},sendMessage:function(R){R=JSON.stringify(R),ae("Send Message","message:"+R,n[O].iframe,O)}})}function s(R){function q(){ae("iFrame.onload",R,a,e,!0),D()}function G(Ee){if(a.parentNode){var He=new Ee(function(qe){qe.forEach(function(Ve){var De=Array.prototype.slice.call(Ve.removedNodes);De.forEach(function(de){de===a&&re(a)})})});He.observe(a.parentNode,{childList:!0})}}var le=V();le&&G(le),X(a,"load",q),ae("init",R,a,e,!0)}function m(R){if(typeof R!="object")throw new TypeError("Options is not an object")}function w(R){for(var q in B)Object.prototype.hasOwnProperty.call(B,q)&&(n[O][q]=Object.prototype.hasOwnProperty.call(R,q)?R[q]:B[q])}function T(R){return R===""||R.match(/^(about:blank|javascript:|file:\/\/)/)!==null?"*":R}function x(R){var q=R.split("Callback");if(q.length===2){var G="on"+q[0].charAt(0).toUpperCase()+q[0].slice(1);this[G]=this[R],delete this[R],j(O,"Deprecated: '"+R+"' has been renamed '"+G+"'. The old method will be removed in the next major version.")}}function k(R){R=R||{},n[O]={firstRun:!0,iframe:a,remoteHost:a.src&&a.src.split("/").slice(0,3).join("/")},m(R),Object.keys(R).forEach(x,R),w(R),n[O]&&(n[O].targetOrigin=n[O].checkOrigin===!0?T(n[O].remoteHost):"*")}function $(){return O in n&&"iFrameResizer"in a}var O=L(a.id);$()?j(O,"Ignored iFrame, already setup."):(k(b),S(),F(),ue(),s(Me(O)),fe())}function Pe(a,b){C===null&&(C=setTimeout(function(){C=null,a()},b))}var ie={};function Y(a,b,F){ie[F]||(ie[F]=setTimeout(function(){ie[F]=null,a()},b))}function Oe(){function a(){function L(S){function ue(fe){return(n[S]&&n[S].iframe.style[fe])==="0px"}function D(fe){return fe.offsetParent!==null}n[S]&&D(n[S].iframe)&&(ue("height")||ue("width"))&&ae("Visibility change","resize",n[S].iframe,S)}Object.keys(n).forEach(function(S){L(S)})}function b(L){p("window","Mutation observed: "+L[0].target+" "+L[0].type),Pe(a,16)}function F(){var L=document.querySelector("body"),S={attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0},ue=new A(b);ue.observe(L,S)}var A=V();A&&F()}function Re(a){function b(){Se("Window "+a,"resize")}p("window","Trigger event: "+a),Pe(b,16)}function Ae(){function a(){Se("Tab Visable","resize")}document.visibilityState!=="hidden"&&(p("document","Trigger event: Visiblity change"),Pe(a,16))}function Se(a,b){function F(A){return n[A]&&n[A].resizeFrom==="parent"&&n[A].autoResize&&!n[A].firstRun}Object.keys(n).forEach(function(A){F(A)&&ae(a,b,n[A].iframe,A)})}function Le(){X(window,"message",H),X(window,"resize",function(){Re("resize")}),X(document,"visibilitychange",Ae),X(document,"-webkit-visibilitychange",Ae)}function Ce(){function a(A,L){function S(){if(L.tagName){if(L.tagName.toUpperCase()!=="IFRAME")throw new TypeError("Expected <IFRAME> tag, found <"+L.tagName+">")}else throw new TypeError("Object is not a valid DOM element")}L&&(S(),we(L,A),F.push(L))}function b(A){A&&A.enablePublicMethods&&j("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}var F;return ce(),Le(),function(L,S){switch(F=[],b(L),typeof S){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(S||"iframe"),a.bind(e,L));break;case"object":a(L,S);break;default:throw new TypeError("Unexpected data type ("+typeof S+")")}return F}}function je(a){a.fn?a.fn.iFrameResize||(a.fn.iFrameResize=function(F){function A(L,S){we(S,F)}return this.filter("iframe").each(A).end()}):P("","Unable to bind to jQuery, it is not fully loaded.")}window.jQuery&&je(window.jQuery),typeof e=="function"&&e.amd?e([],Ce):t.exports=Ce(),window.iFrameResize=window.iFrameResize||Ce()})()})(ft);class lt{constructor(){this.initializedCtas=new Map,document.readyState!=="loading"?this.init({autoOpen:!0}):document.addEventListener("DOMContentLoaded",()=>{this.init({autoOpen:!0})})}async init(e={}){var y;const l=dt("c2b.js");if(this.scriptLocale=l.locale,this.scriptRegion=l.region,this.scriptRegionCodes=(y=l.regionCodes)==null?void 0:y.split(","),this.scriptGroupToken=l.token,typeof window.c2bAnalytics>"u"){const r=document.createElement("script");r.src="https://analytics.clic2buy.com/c2b-analytics.js",document.body.appendChild(r),window.c2bAnalytics=window.c2bAnalytics||{q:[],track:function(){window.c2bAnalytics.q.push(arguments)}}}if(e.autoOpen){const r=_e("c2d_o",window.location.search);if(r){const u=this.scriptLocale||"fr-FR",i=this.scriptRegion||u.slice(-2);this.initPopin(r,{locale:u,region:i})}}await Promise.all([this.initCtas(document.querySelectorAll("[data-widget-element], [data-inline-trigger]")),this.initMultiproductWidgetCtas(document.querySelectorAll("[data-multiproduct-widget-element]")),this.initInlineAutoOpen(document.querySelectorAll("[data-inline-container-auto-open]"))])}async initCtas(e){e instanceof NodeList&&(e=Array.from(e));const l=["widgetId","widgetEan","widgetReference"];if(e=e.filter(y=>{if(this.initializedCtas.has(y)){const r=this.initializedCtas.get(y).dataset;let u=!1;return l.forEach(i=>{y.dataset[i]!==r[i]&&(u=!0)}),u}else return!0}),e.length>0){e.forEach(u=>{this.initializedCtas.set(u,{...this.initializedCtas.get(u),dataset:{...u.dataset}})});const y=this.extractElementsMap(e);await this.completeElementsMap(y);const r=[];y.forEach((u,i)=>{if(u.active){const h=u.widgetKey,g=i.getAttribute("data-inline-trigger")!==null;let f,E;if(g&&(E=i.getAttribute("data-inline-href"),f=document.querySelector(`[data-inline-container][data-inline-name='${E}']`)),!g||f){i.style.display="";const v=i.getAttribute("data-widget-customisation-id"),n=i.getAttribute("data-mlp-id"),C=i.getAttribute("data-popin-id");this.initializedCtas.get(i).clickHandler&&i.removeEventListener("click",this.initializedCtas.get(i).clickHandler);const B=()=>{g?this.initInline(h,f,{locale:u.locale,region:u.region,regionCodes:u.regionCodes,customisationId:v,mlpId:n,popinId:C}):this.initPopin(h,{locale:u.locale,region:u.region,regionCodes:u.regionCodes,customisationId:v,mlpId:n,popinId:C})};i.addEventListener("click",B,!1),this.initializedCtas.set(i,{...this.initializedCtas.get(i),clickHandler:B}),r.push({cta:i,widgetKey:h,mlpId:n,popinId:C})}else i.style.display="none",console.error(`There is no inline container matching the ref ${E}`)}else i.style.display="none"}),r.length>0&&r.forEach(({cta:u,widgetKey:i,mlpId:h,popinId:g})=>{const f=(v,n)=>{v.forEach(C=>{C.intersectionRatio>0&&(window.c2bAnalytics.track("print_button",{key:i,parentHostname:window.location.hostname,mlpId:h?parseInt(h):void 0,popinId:g?parseInt(g):void 0}),n.unobserve(C.target))})};new IntersectionObserver(f,{root:null,rootMargin:"0px",threshold:.5}).observe(u)})}}async initMultiproductWidgetCtas(e){e instanceof NodeList&&(e=Array.from(e));const l=["multiproductWidgetId"];if(e=e.filter(y=>{if(this.initializedCtas.has(y)){const r=this.initializedCtas.get(y).dataset;let u=!1;return l.forEach(i=>{y.dataset[i]!==r[i]&&(u=!0)}),u}else return!0}),e.length>0){e.forEach(h=>{this.initializedCtas.set(h,{...this.initializedCtas.get(h),dataset:{...h.dataset}})});const y=this.extractElementsMap(e,!0),r=Array.from(y.values()).map(h=>h.multiproductWidgetKey).filter(h=>h!==void 0),u=await this.checkMultiproductWidgetPrintCta(r);Array.from(y.values()).forEach(h=>{if(h.multiproductWidgetKey){const g=u.find(f=>f.key===h.multiproductWidgetKey);g?h.active=g.active&&g.group.active:h.active=!1}else h.active=!1});const i=[];y.forEach((h,g)=>{if(h.active){const f=h.multiproductWidgetKey;g.style.display="",this.initializedCtas.get(g).clickHandler&&g.removeEventListener("click",this.initializedCtas.get(g).clickHandler);const E=()=>{this.initPopin(f,{locale:h.locale,region:h.region,regionCodes:h.regionCodes},!0)};g.addEventListener("click",E,!1),this.initializedCtas.set(g,{...this.initializedCtas.get(g),clickHandler:E}),i.push({cta:g,multiproductWidgetKey:f})}else g.style.display="none"}),i.length>0&&i.forEach(({cta:h,multiproductWidgetKey:g})=>{const f=(v,n)=>{v.forEach(C=>{C.intersectionRatio>0&&(window.c2bAnalytics.track("print_button",{medium:"multiproductWidget",key:g,parentHostname:window.location.hostname}),n.unobserve(C.target))})};new IntersectionObserver(f,{root:null,rootMargin:"0px",threshold:.5}).observe(h)})}}initPopinCtas(e){this.initCtas(e)}initPopinCta(e){this.initCtas([e])}async initInlineCtas(e){this.initCtas(e)}initInlineCta(e){this.initInlineCtas([e])}async initInlineAutoOpen(e){if(e instanceof NodeList&&(e=Array.from(e)),e.length>0){const l=this.extractElementsMap(e);await this.completeElementsMap(l),l.forEach((y,r)=>{if(y.active){r.style.display="";const u=r.getAttribute("data-widget-customisation-id"),i=r.getAttribute("data-mlp-id"),h=r.getAttribute("data-popin-id");this.initInline(y.widgetKey,r,{locale:y.locale,region:y.region,regionCodes:y.regionCodes,customisationId:u,mlpId:i,popinId:h,closable:0})}else r.style.display="none"})}}extractElementsMap(e,l=!1){const y=new Map,r=l?"data-multiproduct-widget-":"data-widget-";return e.forEach(async u=>{const i={};if(u.getAttribute(`${r}locale`)?i.locale=u.getAttribute(`${r}locale`):i.locale=this.scriptLocale||"fr-FR",u.getAttribute(`${r}region-codes`)?(i.regionCodes=u.getAttribute(`${r}region-codes`).split(","),i.region=i.regionCodes[0]):u.getAttribute(`${r}region`)?i.region=u.getAttribute(`${r}region`):this.scriptRegionCodes?(i.regionCodes=this.scriptRegionCodes,i.region=i.regionCodes[0]):i.region=this.scriptRegion||i.locale.slice(-2),u.getAttribute(`${r}id`)){const h=l?"multiproductWidgetKey":"widgetKey";i[h]=u.getAttribute(`${r}id`)}if(!l){if(u.getAttribute(`${r}ean`)){let h=u.getAttribute(`${r}ean`);h.length===13&&(h=`0${h}`),i.ean=h}u.getAttribute(`${r}upc`)&&(i.upc=u.getAttribute(`${r}upc`)),u.getAttribute(`${r}reference`)&&(i.reference=u.getAttribute(`${r}reference`),i.groupToken=this.scriptGroupToken)}y.set(u,i)}),y}async completeElementsMap(e){if(Array.from(e.values()).some(u=>!u.widgetKey&&(u.ean||u.upc||u.reference))){const u=[];Array.from(e.values()).forEach(h=>{h.widgetKey||(h.ean?u.push({ean:h.ean,region_code:h.region}):h.upc?u.push({upc:h.upc,region_code:h.region}):h.reference&&u.push({reference:h.reference,group_token:h.groupToken}))});const i=await this.resolveCtas(u);Array.from(e.values()).forEach(h=>{if(!h.widgetKey){let g;h.ean?g=i.find(f=>f.product.ean===h.ean&&f.product.region_code===h.region):h.upc?g=i.find(f=>f.product.upc===h.upc&&f.product.region_code===h.region):h.reference&&(g=i.find(f=>f.product.reference===h.reference)),g&&(h.widgetKey=g.key)}})}const y=Array.from(e.values()).map(u=>u.widgetKey).filter(u=>u!==void 0),r=await this.checkPrintCta(y);Array.from(e.values()).forEach(u=>{u.active=u.widgetKey&&r.widgets_active[u.widgetKey]})}async checkPrintCta(e){return await(await fetch("https://brands.click2buy.com/api/front_widgets/print_cta",{method:"POST",headers:{Authorization:"Token token=414c45b218354cd62982fba0d9331384","Content-Type":"application/json"},body:JSON.stringify({widget_keys:e})})).json()}async checkMultiproductWidgetPrintCta(e){return await(await fetch("https://brands.click2buy.com/api/multiproduct_widgets/print_cta",{method:"POST",headers:{Authorization:"Token token=414c45b218354cd62982fba0d9331384","Content-Type":"application/json"},body:JSON.stringify({multiproduct_widget_keys:e})})).json()}async resolveCtas(e){return await(await fetch("https://brands.click2buy.com/api/front_widgets/resolve_ctas",{method:"POST",headers:{Authorization:"Token token=414c45b218354cd62982fba0d9331384","Content-Type":"application/json"},body:JSON.stringify({ctas:e})})).json()}initPopin(e,l={},y=!1){this._isBodyOverflowing()&&(document.body.style.paddingRight=`${this._scrollbarWidth()}px`),document.body.style.overflow="hidden";const r=document.createElement("iframe");r.id="c2b-widget-popin-iframe",r.allow="geolocation",r.style.border="none",r.style.position="fixed",r.style.zIndex="10001",r.width="100%",r.height="100%",r.style.width="100%",r.style.height="100%",r.style.maxHeight="100%",r.style.top="0",r.style.bottom="0",r.style.left="0",r.style.right="0",r.style.display="block",document.body.insertBefore(r,document.body.firstChild),r.contentWindow.focus(),r.src=this.widgetUrl(e,l,!1,y);const u=async i=>{if(r&&i.source===r.contentWindow&&typeof i.data=="string"){if(i.data==="clic2buy:closeWidgetPopin")document.body.removeChild(r),document.body.style.overflow="",document.body.style.paddingRight="",window.removeEventListener("message",u);else if(i.data==="clic2buy:requestGeolocation"){const h={name:"clic2buy:sendGeolocation",position:null,error:null};await new Promise(g=>{navigator.geolocation.getCurrentPosition(f=>{h.position={coords:{latitude:f.coords.latitude,longitude:f.coords.longitude}},g()},f=>{h.error=f.message,g()})}),r.contentWindow.postMessage(JSON.stringify(h),"*")}}};window.addEventListener("message",u,!1)}initInline(e,l,y={}){let r=l.querySelector(`.c2b-widget-inline-iframe[data-key='${e}']`);if(!r){r=document.createElement("iframe"),r.class="c2b-widget-inline-iframe",r.allow="geolocation",r.style.border="none",r.style.width="100%",r.style.display="block",r.dataset.key=e,l.innerHTML="",l.appendChild(r),r.contentWindow.focus(),r.src=this.widgetUrl(e,y,!0),We({heightCalculationMethod:"max"},r);const u=async i=>{if(r&&i.source===r.contentWindow&&typeof i.data=="string"){if(i.data.match(/clic2buy:closeWidgetInline/))r.parentNode.removeChild(r),window.removeEventListener("message",u);else if(i.data==="clic2buy:requestGeolocation"){const h={name:"clic2buy:sendGeolocation",position:null,error:null};await new Promise(g=>{navigator.geolocation.getCurrentPosition(f=>{h.position={coords:{latitude:f.coords.latitude,longitude:f.coords.longitude}},g()},f=>{h.error=f.message,g()})}),r.contentWindow.postMessage(JSON.stringify(h),"*")}}};window.addEventListener("message",u,!1)}}widgetUrl(e,l,y=!1,r=!1){let u;r?u=`https://widget.clic2buy.com/multiproduct/${e}`:u=`https://widget.clic2buy.com/${e}`;const i=new URL(u);y&&i.searchParams.set("inline",1),i.searchParams.set("locale",l.locale),i.searchParams.set("c2b_source",_e("utm_source",window.location.search)||window.location.hostname.replace("www.","")),i.searchParams.set("parent_origin",window.location.origin),i.searchParams.set("parent_protocol",window.location.protocol),i.searchParams.set("parent_hostname",window.location.hostname),i.searchParams.set("parent_pathname",window.location.pathname),i.searchParams.set("askParentLocation",!0);const h={source:_e("utm_source",window.location.search),medium:_e("utm_medium",window.location.search),campaign:_e("utm_campaign",window.location.search),content:_e("utm_content",window.location.search),term:_e("utm_term",window.location.search)};h.source&&i.searchParams.set("utm_source",h.source),h.medium&&i.searchParams.set("utm_medium",h.medium),h.campaign&&i.searchParams.set("utm_campaign",h.campaign),h.content&&i.searchParams.set("utm_content",h.content),h.term&&i.searchParams.set("utm_term",h.term),l.region&&i.searchParams.set("region",l.region),l.regionCodes&&i.searchParams.set("regionCodes",l.regionCodes),l.customisationId&&i.searchParams.set("customisation_id",l.customisationId),l.mlpId&&i.searchParams.set("mlp_id",l.mlpId),l.popinId&&i.searchParams.set("popin_id",l.popinId),hasOwnProperty.call(l,"closable")&&i.searchParams.set("closable",l.closable);let g=i.href;return window.ga&&window.ga(()=>{const f=window.ga.getAll();if(f.length>0){const E=f[0];g+=`&${E.get("linkerParam")}`}}),g}_scrollbarWidth(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e);const l=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),l}_isBodyOverflowing(){const e=document.body.getBoundingClientRect();return e.left+e.right<window.innerWidth}}function dt(t){const e=document.getElementsByTagName("script");for(let l=0;l<e.length;l++)if(e[l].src.indexOf("/"+t)>-1){const y=e[l].src.split("?").pop().split("&"),r={};for(let u=0;u<y.length;u++){const i=y[u].split("=");r[i[0]]=i[1]}return r}return{}}function _e(t,e){e||(e=window.location.href),t=t.replace(/[[\]]/g,"\\$&");const y=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return y?y[2]?decodeURIComponent(y[2].replace(/\+/g," ")):"":null}window.c2bWidget=window.c2bWidget||new lt})();
